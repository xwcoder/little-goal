(window.webpackJsonp=window.webpackJsonp||[]).push([["index"],{"2YZa":function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"goal",function(){return pe}),n.d(a,"initState",function(){return Ee}),n.d(a,"unit",function(){return fe}),n.d(a,"action",function(){return be});var l=n("Jkrb");Object(l.b)();var r=n("q1tI"),i=n("i8i4"),c=n("wSuE"),o=n("/MKj"),s=n("oFFJ"),m=n("jKe7"),u=n("2INN"),d=n("DvoB"),g=n("SUMQ"),p=n("r1Q0"),E=n("2iEm"),f=n("HWyw");const b=Object(l.c)({grow:{flexGrow:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}});function y(e){const t=b(),{title:n,backButton:a=!1,children:l}=e;const i=a?r.createElement(d.k,{color:"inherit",onClick:function(){history.back()}},r.createElement(f.b,null)):null;return r.createElement(d.a,{position:"sticky"},r.createElement(d.y,null,i,r.createElement(d.z,{className:t.grow,variant:"h6",color:"inherit"},n),l))}const h=Object(l.c)(e=>({container:{padding:3*e.spacing.unit,paddingTop:0}}));function v({className:e="",children:t}){const n=h();return r.createElement("div",{className:`${n.container} ${e}`},t)}const w=Object(l.c)(e=>({track:{position:"absolute",left:0,bottom:0,width:"100%",height:"100%",backgroundColor:e.palette.primary.light,opacity:.1,pointerEvents:"none",transformOrigin:"left"}}));function k({value:e=0}){const t=w();return r.createElement("div",{style:{transform:`scaleX(${e.toFixed(2)})`},className:t.track})}const x=()=>{};function j(e,t){"[object Date]"!=={}.toString.call(e)&&(e=new Date(parseInt(e,10)));const n={"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(const e in n)new RegExp(`(${e})`).test(t)&&(t=t.replace(RegExp.$1,`00${n[e]}`.substr(-RegExp.$1.length)));return t}const S=["本","篇","米","千米","小时","天"],I="/little-goal";function O(e,...t){const n=[];return t.forEach((t,a)=>{n.push(e[a]),n.push(t)}),n.push(e[e.length-1]),`${I}${n.join("")}`}const C=Object(l.c)(e=>({listItem:{border:"1px solid",borderColor:e.palette.primary.light,paddingTop:e.spacing.unit,paddingBottom:e.spacing.unit,marginBottom:1.5*e.spacing.unit,borderRadius:e.shape.borderRadius,overflow:"hidden"},link:{flex:1,marginRight:1.5*e.spacing.unit,color:e.palette.primary.dark,textDecoration:"none"},actionAddLink:{color:e.palette.primary.dark,fontSize:"1rem",lineHeight:"1rem"},icon:{fontSize:"1.125rem"}}));var T=Object(o.b)(e=>({goalList:e.goal}))(function({goalList:e}){const t=C(),n=e.map(e=>{const{id:n,title:a,completeAmount:l=0,amount:i}=e;return r.createElement(d.n,{key:n,className:t.listItem},r.createElement(k,{value:l/i}),r.createElement(E.a,{className:t.link,to:O`/goal/${n}`},a),r.createElement(E.a,{className:t.actionAddLink,to:O`/action/add/${n}`},r.createElement(f.a,{className:t.icon})))});return r.createElement(d.m,null,n)});function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const D=Object(l.c)(e=>({icon:{fontSize:"1.25rem"}})),$={add:f.a,edit:f.f,del:f.e};function L(e){const t=D(),{variant:n,className:a="",...l}=e,i=$[n];return r.createElement(i,N({className:`${t.icon} ${a}`},l))}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const A=Object(l.c)({link:{color:"inherit"}});function F(e){const{to:t,variant:n,children:a,className:l,...i}=e,c=A();return r.createElement(d.k,{color:"inherit"},r.createElement(E.a,B({to:t,className:`${c.link} ${l}`},i),r.createElement(L,{variant:n})))}const M=Object(l.c)(e=>({contentContainer:{paddingTop:3*e.spacing.unit},emptyContainer:{marginTop:5*e.spacing.unit,textAlign:"center"},addLink:{display:"inline-block",textDecoration:"none"}}));var W=Object(o.b)(e=>({initState:e.initState,goalCount:e.goal.length}))(function({initState:e,goalCount:t}){const n=M();let a;return a=e?0===t?r.createElement("div",{className:n.emptyContainer},r.createElement(E.a,{to:O`/goal/add`,className:n.addLink},r.createElement(d.b,{variant:"outlined",color:"primary"},"定个小目标"))):r.createElement(T,null):null,r.createElement(r.Fragment,null,r.createElement(y,{title:"小目标"},e&&r.createElement(F,{to:O`/goal/add`,variant:"add"})),r.createElement(v,{className:n.contentContainer},a))});var P=Object(o.b)(null,e=>({create:t=>e.unit.create(t)}))(function(e){const{open:t,handleClose:n,create:a,onSuccess:l=x}=e,[i,c]=Object(r.useState)(""),[o,s]=Object(r.useState)("");return r.createElement(d.d,{open:t},r.createElement("form",{onSubmit:async function(e){e.preventDefault();try{const t=await a(i);n(),c(""),l(t)}catch(e){e&&"ConstraintError"===e.name&&s(`已有计量单位: ${i}`)}}},r.createElement(d.h,null,"添加计量单位"),r.createElement(d.f,null,r.createElement(d.g,{color:"error",variant:"body2"},o),r.createElement(d.x,{autoFocus:!0,required:!0,value:i,placeholder:"例如，km",margin:"dense",label:"计量单位",fullWidth:!0,onChange:function(e){i!==e.target.value&&s(""),c(e.target.value)}})),r.createElement(d.e,null,r.createElement(d.b,{color:"primary",onClick:n},"关闭"),r.createElement(d.b,{type:"submit",color:"primary"},"添加"))))});const R=Object(l.c)(e=>({selectControl:{minWidth:120,marginBottom:0},submitButton:{marginTop:3*e.spacing.unit},unitBtn:{padding:4,marginLeft:4,minWidth:0,minHeight:0,fontSize:12,lineHeight:1,fontWeight:"normal",color:e.palette.primary.light,textDecoration:"none"},addBtn:{marginLeft:1.5*e.spacing.unit}}));var q=Object(o.b)(e=>({goalList:e.goal,unitList:e.unit}),e=>({create:t=>e.goal.create(t),update:t=>e.goal.update(t)}))(function(e){const t=R(),{id:n,goalList:a,onSuccess:l=x,create:i,update:c}=e,{unitList:o}=e,s=void 0!==n;let m={};if(s&&(m=a.find(e=>e.id===n)),!m||!o.length)return null;const[u,g]=Object(r.useState)({title:m.title||"",amount:m.amount||"",unitId:m.unitId||o[0].id,startTime:j(m.startTime||new Date,"yyyy-MM-dd"),endTime:m.endTime?j(m.endTime,"yyyy-MM-dd"):`${(new Date).getFullYear()}-12-31`}),p=e=>t=>{g({...u,[e]:t.target.value})},[f,b]=Object(r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement("form",{onSubmit:async e=>{e.preventDefault();const t={...m,...u,amount:parseInt(u.amount,10),startTime:new Date(u.startTime).getTime(),endTime:new Date(u.endTime).getTime()};s?await c(t):await i(t),l()}},r.createElement(d.x,{label:"标题",placeholder:`比如: ${(new Date).getFullYear()}年读12本书`,value:u.title,fullWidth:!0,required:!0,autoFocus:!0,margin:"normal",onChange:p("title")}),r.createElement(d.x,{label:"目标",placeholder:"数量 比如: 12",value:u.amount,fullWidth:!0,required:!0,margin:"normal",type:"number",onChange:p("amount")}),r.createElement(d.j,{container:!0,alignItems:"flex-end"},r.createElement(d.i,{required:!0,className:t.selectControl,margin:"normal"},r.createElement(d.l,null,"计量单位"),r.createElement(d.p,{value:u.unitId,onChange:p("unitId")},o.map(e=>r.createElement(d.o,{key:e.id,value:e.id},e.text)))),r.createElement(d.b,{className:`${t.unitBtn} ${t.addBtn}`,onClick:function(){b(!0)}},"添加"),r.createElement(E.a,{to:O`/unit/list`,className:t.unitBtn},"管理")),r.createElement("div",null,r.createElement(d.x,{label:"开始日期",type:"date",value:u.startTime,required:!0,margin:"normal",onChange:p("startTime")})),r.createElement("div",null,r.createElement(d.x,{label:"结束日期",type:"date",value:u.endTime,required:!0,margin:"normal",onChange:p("endTime")})),r.createElement(d.b,{className:t.submitButton,type:"submit",color:"primary",variant:"contained",fullWidth:!0},"done")),r.createElement(P,{open:f,handleClose:function(){b(!1)},onSuccess:function(e){g({...u,unitId:e})}}))});function H(){return r.createElement(r.Fragment,null,r.createElement(y,{title:"定个小目标",backButton:!0}),r.createElement(v,null,r.createElement(q,{onSuccess:function(){history.back()}})))}const z=Object(l.c)(e=>({actionButton:{marginTop:3*e.spacing.unit},link:{display:"block",textDecoration:"none",color:"inherit"},allActionLink:{display:"inline-block",marginBottom:e.spacing.unit,marginLeft:2*e.spacing.unit,fontSize:12,textDecoration:"none",color:e.palette.primary.light}}));var K=Object(o.b)(e=>({goalList:e.goal,unitList:e.unit}),e=>({del:t=>e.goal.del(t)}))(function({goalList:e,unitList:t,history:n,match:a,del:l}){const i=parseInt(a.params.id,10),c=e.find(e=>e.id===i);if(!c)return null;const o=z(),s=t.find(e=>e.id===c.unitId),{title:m,amount:u,completeAmount:g=0,startTime:p,endTime:f}=c,b={disabled:!0},h=`${(g/u*100).toFixed(2)}%`,w=j(p,"yyyy-MM-dd"),k=j(f,"yyyy-MM-dd"),[x,S]=Object(r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(y,{title:c.title,backButton:!0},r.createElement(F,{to:O`/goal/edit/${i}`,variant:"edit"}),r.createElement(d.k,{color:"inherit",onClick:function(){S(!0)}},r.createElement(L,{variant:"del"}))),r.createElement(v,null,r.createElement(d.x,{label:"标题",value:m,fullWidth:!0,margin:"normal",inputProps:b}),r.createElement(d.x,{label:"目标",value:u,fullWidth:!0,margin:"normal",inputProps:b}),r.createElement(d.j,{container:!0,alignItems:"flex-end"},r.createElement(d.x,{label:"已完成",value:g,margin:"normal",inputProps:b}),g>0&&r.createElement(E.a,{to:O`/action/list/${i}`,className:o.allActionLink},"全部完成项")),r.createElement(d.x,{label:"进度",value:h,fullWidth:!0,margin:"normal",inputProps:b}),r.createElement(d.x,{label:"计量单位",value:s.text,margin:"normal",inputProps:b}),r.createElement("div",null,r.createElement(d.x,{label:"开始日期",type:"date",value:w,margin:"normal",inputProps:b})),r.createElement("div",null,r.createElement(d.x,{label:"结束日期",type:"date",value:k,margin:"normal",inputProps:b})),r.createElement(E.a,{to:O`/action/add/${i}`,className:o.link},r.createElement(d.b,{className:o.actionButton,color:"primary",variant:"contained",fullWidth:!0},"向前一小步"))),r.createElement(d.d,{open:x},r.createElement(d.h,null,"放弃「",c.title,"」?"),r.createElement(d.f,null,r.createElement(d.g,null,"最可怕的敌人，就是没有坚强的信念。——罗曼·罗兰")),r.createElement(d.e,null,r.createElement(d.b,{color:"primary",onClick:function(){S(!1)}},"再坚持一下"),r.createElement(d.b,{color:"primary",onClick:async function(){await l(i),n.goBack()}},"删了吧"))))});function Y({match:e}){const t=parseInt(e.params.id,10);return r.createElement(r.Fragment,null,r.createElement(y,{title:"修改小目标",backButton:!0}),r.createElement(v,null,r.createElement(q,{id:t,onSuccess:function(){history.back()}})))}const J=Object(l.c)(e=>({selectControl:{minWidth:120},submitButton:{marginTop:3*e.spacing.unit}}));var G=Object(o.b)(e=>({goalList:e.goal}),e=>({create:t=>e.action.create(t)}))(function(e){const t=J(),{goalId:n,goalList:a,onSuccess:l=x,create:i}=e,c=a.find(e=>e.id===n);if(!c)return null;const[o,s]=Object(r.useState)({amount:"",time:j(new Date,"yyyy-MM-ddThh:mm")}),m=e=>t=>{s({...o,[e]:t.target.value})};return r.createElement("form",{onSubmit:async e=>{e.preventDefault();const{time:t}=o,[n,a]=t.split("T"),[r,s]=a.split(":"),m=new Date(n);m.setHours(r),m.setMinutes(s);const u={goalId:c.id,...o,amount:parseInt(o.amount,10),time:m.getTime()};await i(u),l()}},r.createElement(d.x,{label:"目标",value:c.title,fullWidth:!0,margin:"normal",inputProps:{disabled:!0}}),r.createElement(d.x,{label:"完成量",placeholder:"数量 比如: 1",value:o.amount,fullWidth:!0,required:!0,margin:"normal",type:"number",autoFocus:!0,onChange:m("amount")}),r.createElement("div",null,r.createElement(d.x,{label:"完成时间",type:"datetime-local",value:o.time,required:!0,margin:"normal",onChange:m("time")})),r.createElement(d.b,{className:t.submitButton,type:"submit",color:"primary",variant:"contained",fullWidth:!0},"done"))});function V({history:e,match:t}){const n=parseInt(t.params.id,10);return r.createElement(r.Fragment,null,r.createElement(y,{title:"向前一小步",backButton:!0}),r.createElement(v,null,r.createElement(G,{onSuccess:function(){e.goBack()},goalId:n})))}var Q=n("1w3K"),Z=n("2tl8");const U="little-goal",X=1;let _;async function ee(){return _||(_=await Z.a.open(U,X)),_}async function te(e){return(await ee()).transaction("action","readwrite").objectStore("action").delete(e)}var ne=Object(l.c)(e=>({thcell:{"&:last-child":{paddingRight:35}},cellExit:{opacity:1,transition:"all .3s ease-in"},cellExitActive:{opacity:0},icon:{fontSize:"1.125rem"}}));const ae=Object(l.c)(e=>({cell:{paddingLeft:1.5*e.spacing.unit,paddingRight:1.5*e.spacing.unit,"&:last-child":{paddingRight:1.5*e.spacing.unit}}}));var le=Object(o.b)(e=>({goalList:e.goal}),e=>({del:t=>e.action.del(t)}))(function({goalId:e,del:t}){const n=ae(),a=ne(),[l,i]=Object(r.useState)({count:0,list:[]}),{count:c,list:o}=l;async function s(){const t=await async function(e){const t=(await ee()).transaction("action","readonly").objectStore("action");if(void 0===e)return t.count();const n=t.index("goalId"),a=await n.getAllKeys(IDBKeyRange.only(e));return a?a.length:0}(e),n=await async function({goalId:e,start:t=0,limit:n=1/0,fromTime:a=new Date("1970-01-10").getTime(),endTime:l=Date.now()}){let r=1;const i=[],c=(await ee()).transaction("action","readonly").objectStore("action").index("goalId-time");let o=await c.openCursor(IDBKeyRange.bound([e,a],[e,l]),"prev");if(o)for(t>0&&await o.advance(t);o&&r<=n;)r+=1,i.push(o.value),o=await o.continue();return i}({goalId:e,start:o.length,limit:20});i({count:t,list:[...o,...n]})}async function m(e){const n=e.currentTarget,a=parseInt(n.dataset.id,10);await t(a);const r=[...o],c=r.findIndex(e=>e.id===a);r.splice(c,1),i({...l,list:r,count:l.count-1})}Object(r.useEffect)(()=>{s()},[e]);const u=o.map(e=>r.createElement(Q.CSSTransition,{key:e.id,timeout:300,classNames:{exit:a.cellExit,exitActive:a.cellExitActive}},r.createElement(d.w,{key:e.id},r.createElement(d.u,{scope:"row",className:n.cell},j(e.time,"yyyy-MM-dd hh:mm")),r.createElement(d.u,{className:n.cell},e.amount),r.createElement(d.u,{align:"center",className:n.cell},r.createElement(d.k,{onClick:m,"data-id":e.id},r.createElement(f.e,{className:a.icon}))))));return r.createElement(r.Fragment,null,r.createElement(d.s,null,r.createElement(d.v,null,r.createElement(d.w,null,r.createElement(d.u,{className:n.cell},"日期"),r.createElement(d.u,{className:n.cell},"数量"),r.createElement(d.u,{align:"center",className:n.cell},"操作"))),r.createElement(d.t,null,r.createElement(Q.TransitionGroup,{component:null},u))),c>o.length&&r.createElement(d.b,{color:"primary",onClick:s},"更多"))});var re=Object(o.b)(e=>({goalList:e.goal}))(function({goalList:e,match:t}){const n=parseInt(t.params.id,10),a=e.find(e=>e.id===n);if(!a)return null;const{title:l}=a;return r.createElement(r.Fragment,null,r.createElement(y,{title:l,backButton:!0},r.createElement(F,{to:O`/action/add/${n}`,variant:"add"})),r.createElement(v,null,r.createElement(le,{goalId:n})))});const ie=Object(l.c)(e=>({success:{backgroundColor:p.green[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:p.amber[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",aliginItems:"center"}})),ce={success:f.c,warning:f.i,error:f.g,info:f.h};function oe({open:e=!1,variant:t,autoHideDuration:n=null,onClose:a=x,message:l,className:i=""}){const c=ie(),o=ce[t];return r.createElement(d.q,{open:e,autoHideDuration:n,onClose:a},r.createElement(d.r,{className:`${c[t]} ${i}`,message:r.createElement("span",{className:c.message},r.createElement(o,{className:`${c.icon} ${c.iconVariant}`}),l),action:[r.createElement(d.k,{key:"close",color:"inherit",onClick:a},r.createElement(f.d,{className:c.icon}))]}))}var se=Object(o.b)(e=>({goalList:e.goal,unitList:e.unit}),e=>({del:t=>e.unit.del(t)}))(function(e){const{unitList:t,goalList:n,del:a}=e,l=ne(),[i,c]=Object(r.useState)({open:!1,message:"",variant:"error"});function o(e){const l=parseInt(e.currentTarget.dataset.id,10),r=t.find(e=>e.id===l);n.some(e=>e.unitId===l)?c({...i,open:!0,message:`有目标在使用「${r.text}」, 不能删除.`}):t.length<=1?c({...i,open:!0,message:"这是最后一个计量单位, 不能删除."}):a(l)}const s=t.map(e=>r.createElement(Q.CSSTransition,{key:e.id,timeout:300,classNames:{exit:l.cellExit,exitActive:l.cellExitActive}},r.createElement(d.w,{key:e.id},r.createElement(d.u,null,e.text),r.createElement(d.u,{align:"right"},r.createElement(d.k,{"data-id":e.id,onClick:o},r.createElement(f.e,{className:l.icon})))))),m=r.createElement(r.Fragment,null,r.createElement(d.s,null,r.createElement(d.v,null,r.createElement(d.w,null,r.createElement(d.u,{className:l.thcell},"计量单位"),r.createElement(d.u,{align:"right",className:l.thcell},"操作"))),r.createElement(d.t,null,r.createElement(Q.TransitionGroup,{component:null},s))));return r.createElement(r.Fragment,null,m,r.createElement(oe,{open:i.open,message:i.message,variant:i.variant,onClose:function(){c({...i,open:!1})},autoHideDuration:2e3}))});function me(){const[e,t]=Object(r.useState)(!1);return r.createElement(r.Fragment,null,r.createElement(y,{title:"计量单位",backButton:!0},r.createElement(d.k,{onClick:function(){t(!0)},color:"inherit"},r.createElement(f.a,null))),r.createElement(v,null,r.createElement(se,null)),r.createElement(P,{open:e,handleClose:function(){t(!1)}}))}const ue=Object(g.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:p.blue}});var de=Object(c.hot)(function({store:e}){return r.createElement(s.a,null,r.createElement(o.a,{store:e},r.createElement(l.a,{theme:ue},r.createElement(d.c,null),r.createElement(m.a,null,r.createElement(u.a,{path:O`/`,exact:!0,component:W}),r.createElement(u.a,{path:O`/goal/add`,component:H}),r.createElement(u.a,{path:O`/goal/:id`,exact:!0,component:K}),r.createElement(u.a,{path:O`/goal/edit/:id`,component:Y}),r.createElement(u.a,{path:O`/action/add/:id`,component:V}),r.createElement(u.a,{path:O`/action/list/:id`,component:re}),r.createElement(u.a,{path:O`/unit/list`,component:me}),r.createElement(u.a,{component:W})))))}),ge=n("EWxa");const pe={state:[],reducers:{add:(e,t)=>[...Array.isArray(t)?t:[t],...e],remove(e,t){const n=[...e],a=n.findIndex(e=>e.id===t);return-1!==a?(n.splice(a,1),[...n]):e},replace(e,t){const n=[...e],a=n.findIndex(e=>e.id===t.id);return-1!==a?(n.splice(a,1,t),[...n]):e},unshift:(e,t)=>[t,...e]},effects:e=>({async create(t){const n=await async function(e){const t=(await ee()).transaction("goal","readwrite").objectStore("goal");return e.createTime=Date.now(),t.add(e)}(t);t.id=n,e.goal.unshift(t)},async update(t){await async function(e){const t=(await ee()).transaction("goal","readwrite").objectStore("goal"),n=await t.openCursor(e.id);if(e.updateTime=Date.now(),n)return n.update(e)}(t),e.goal.replace(t)},async del(t){await async function(e){const t=(await ee()).transaction(["goal","action"],"readwrite"),n=t.objectStore("goal"),a=t.objectStore("action").index("goalId");n.delete(e);let l=await a.openCursor(e);for(;l;)await l.delete(),l=await l.continue()}(t),e.goal.remove(t)}})},Ee={state:!1,reducers:{setState:(e,t)=>t}};const fe={state:[],reducers:{add:(e,t)=>[...Array.isArray(t)?t:[t],...e],remove(e,t){const n=[...e],a=n.findIndex(e=>e.id===t);return-1!==a?(n.splice(a,1),n):e}},effects:e=>({async create(t){const n=await async function(e){const t={...e,createTime:Date.now()};return(await ee()).transaction("unit","readwrite").objectStore("unit").add(t)}({text:t});return e.unit.add({text:t,id:n}),n},async del(t){await async function(e){return(await ee()).transaction("unit","readwrite").objectStore("unit").delete(e)}(t),e.unit.remove(t)}})},be={state:[],reducers:{add:(e,t)=>[t,...e]},effects:e=>({async create(t,n){const a=await async function(e){const t={...e,createTime:Date.now()};return(await ee()).transaction("action","readwrite").objectStore("action").add(t)}(t);t.id=a,e.action.add(t);const{goal:l}=n,r={...l.find(e=>e.id===t.goalId)};return r.completeAmount=(r.completeAmount||0)+t.amount,e.goal.update(r)},async del(t,n){const a=await async function(e){return(await ee()).transaction("action","readonly").objectStore("action").get(e)}(t),{amount:l,goalId:r}=a,{goal:i}=n,c={...i.find(e=>e.id===r)};return c.completeAmount=(c.completeAmount||0)-l,Promise.all([te(t),e.goal.update(c)])}})},ye=Object(ge.init)({models:a});window.store=ye,async function(){await async function(){let e=-1;if(_=await Z.a.open(U,X,(t,n,a)=>{e=n;const l=t.createObjectStore("goal",{autoIncrement:!0,keyPath:"id"});l.createIndex("createTime","createTime"),l.createIndex("updateTime","updateTime");const r=t.createObjectStore("action",{autoIncrement:!0,keyPath:"id"});r.createIndex("goalId","goalId"),r.createIndex("time","time"),r.createIndex("goalId-time",["goalId","time"]),t.createObjectStore("unit",{autoIncrement:!0,keyPath:"id"}).createIndex("text","text",{unique:!0})}),0===e){const e=_.transaction("unit","readwrite").objectStore("unit");return Promise.all(S.map(t=>e.add({text:t})))}}();const e=await async function(){return(await ee()).transaction("unit","readonly").objectStore("unit").getAll()}(),t=await async function(){return(await ee()).transaction("goal","readonly").objectStore("goal").getAll()}();t.reverse(),e.reverse(),ye.dispatch.unit.add(e),ye.dispatch.goal.add(t),ye.dispatch.initState.setState(!0)}(),i.render(r.createElement(de,{store:ye}),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then(e=>{console.log("registion sw.js success.")}).catch(e=>{console.log("registion failed ",e)})}},[["2YZa","manifest","vendor"]]]);